# 风暴英雄韩服无障碍交流插件

![风暴英雄](image/Q版英雄.png "Q版英雄")

## 特性
- 自动监控韩国玩家聊天文本并即时翻译
- 一键将中文翻译成韩文回复（支持多种翻译服务）
- 透明置顶窗口，4 秒后自动淡出，随时按 `Ctrl+Tab` 唤出
- 热键控制：`Ctrl+P` 翻译输入框、`Ctrl+L` 切换目标语言
- 所有翻译接口凭据都保存在本地，可随时通过设置面板切换

## 环境要求
- Windows 64 位系统（需要 `pywin32` 访问游戏进程）
- 已安装 Python 3.9+（如需从源码运行）
- 风暴英雄《Heroes of the Storm》客户端

## 下载与安装
### 使用发行版
1. 访问 [Releases](https://github.com/cosimo17/HOSTrans/releases/tag/v1.0.0 "无障碍插件") 页面并下载 `V1.0.0.zip`。
2. 解压后直接运行 `翻译插件.exe`。
3. 首次运行会在 `src` 目录下生成 `translator_config.json`，用于保存翻译接口设置。

### 从源码运行
1. 克隆仓库或下载源码压缩包并解压。
2. 安装依赖：
   ```bash
   pip install -r requirments.txt
   ```
3. 启动程序：
   ```bash
   python src/app_main.py
   ```

## 翻译接口配置
点击主界面底部的「设置」按钮打开配置窗口：
1. 在「翻译服务」下拉框中选择需要使用的接口。
2. 根据选项填写必填字段，保存后即切换至对应服务。
3. 支持的翻译服务及所需字段如下：

| 服务 | 必填字段 | 说明 |
| ---- | -------- | ---- |
| 百度翻译 | App ID、密钥 | 与旧版 `baiduAPI.txt` 相同，保存后即生效 |
| DeepL | Auth Key | 如需自定义接入点，可填写 API Host（默认 `api-free.deepl.com`） |
| 有道翻译 | App Key、App Secret | 使用开放平台应用凭据 |
| Papago | Client ID、Client Secret | 来自 Naver 开发者中心 |

> **提示**：若已在 `src/baiduAPI.txt` 中写入百度接口凭据，首次启动会自动迁移；之后请改用设置面板维护。

配置保存在 `src/translator_config.json` 中，可备份或手工编辑（请保持 JSON 格式正确）。

## 使用流程
1. **准备工作**
   - 启动翻译插件并完成翻译接口配置。
   - 启动《风暴英雄》，在游戏设置中将显示模式调整为「窗口模式 - 最大化」。
2. **初始化内存扫描（用于监控队友聊天）**
   - 进入自定义或试用模式的游戏房间。
   - 按 `Ctrl+1` 让插件自动发送测试聊天并定位内存（执行期间请勿操作鼠标键盘）。
   - 屏幕提示初始化成功后即可退出试用模式，开始正常对局。
3. **日常使用**
   - 队友发送韩文消息时，插件会在叠加窗口中展示原文与译文。
   - 在聊天框输入中文后按 `Ctrl+P`，即可将内容翻译成目标语言（默认韩文）并回填。
   - 通过 `Ctrl+L` 在中译韩 / 中译英间切换输出语言，或在设置里调整翻译接口。
   - 窗口 4 秒无操作后会自动隐藏，使用 `Ctrl+Tab` 再次显示。

## 常见问题
- **提示“请先在设置中配置翻译接口”**：说明当前服务缺少必要凭据，请重新打开设置补全字段。
- **翻译失败**：请检查网络连通性、接口账号是否可用，以及是否超过免费额度。
- **切换翻译服务后未生效**：保存设置后会立即应用，如仍无效，可删除 `src/translator_config.json` 重新配置。

更多细节请参考 [`src/使用说明-必读.md`](src/使用说明-必读.md)。
